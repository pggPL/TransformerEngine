<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 320" width="100%" style="max-width: 700px;">
  <defs>
    <style>
      @import url("../../../_static/css/diagram-colors.css");
      
      .title { font: bold 16px sans-serif; fill: #333; text-anchor: middle; }
      .label { font: 14px sans-serif; fill: #333; text-anchor: middle; }
      .small-text { font: 12px sans-serif; fill: #555; }
      
      /* Tensor colors */
      .fp8-block { fill: #87CEEB; stroke: #555; stroke-width: 1.5; }
      .fp8-block-alt { fill: #5F9FCC; stroke: #555; stroke-width: 1.5; }
      
      /* Scaling factor colors */
      .scale-factor { fill: #FFA500; stroke: #444; stroke-width: 2; }
      
      .grid-line { stroke: #444; stroke-width: 2; }
    </style>
  </defs>
  
  <!-- ROWWISE Quantization (left side) -->
  <g id="rowwise">
    <text x="200" y="25" class="title">Rowwise</text>
    <text x="200" y="45" class="label" style="font-size: 11px;">(32 consecutive elements horizontally)</text>
    
    <!-- FP8 Tensor - horizontal blocks -->
    <g id="tensor-rowwise">
      <!-- Blocks arranged horizontally (10px height, 40px width) -->
      <rect x="80" y="70" width="40" height="10" class="fp8-block"/>
      <rect x="120" y="70" width="40" height="10" class="fp8-block-alt"/>
      <rect x="160" y="70" width="40" height="10" class="fp8-block"/>
      <rect x="200" y="70" width="40" height="10" class="fp8-block-alt"/>
      <rect x="240" y="70" width="40" height="10" class="fp8-block"/>
      <rect x="280" y="70" width="40" height="10" class="fp8-block-alt"/>
      
      <rect x="80" y="80" width="40" height="10" class="fp8-block-alt"/>
      <rect x="120" y="80" width="40" height="10" class="fp8-block"/>
      <rect x="160" y="80" width="40" height="10" class="fp8-block-alt"/>
      <rect x="200" y="80" width="40" height="10" class="fp8-block"/>
      <rect x="240" y="80" width="40" height="10" class="fp8-block-alt"/>
      <rect x="280" y="80" width="40" height="10" class="fp8-block"/>
      
      <rect x="80" y="90" width="40" height="10" class="fp8-block"/>
      <rect x="120" y="90" width="40" height="10" class="fp8-block-alt"/>
      <rect x="160" y="90" width="40" height="10" class="fp8-block"/>
      <rect x="200" y="90" width="40" height="10" class="fp8-block-alt"/>
      <rect x="240" y="90" width="40" height="10" class="fp8-block"/>
      <rect x="280" y="90" width="40" height="10" class="fp8-block-alt"/>
      
      <rect x="80" y="100" width="40" height="10" class="fp8-block-alt"/>
      <rect x="120" y="100" width="40" height="10" class="fp8-block"/>
      <rect x="160" y="100" width="40" height="10" class="fp8-block-alt"/>
      <rect x="200" y="100" width="40" height="10" class="fp8-block"/>
      <rect x="240" y="100" width="40" height="10" class="fp8-block-alt"/>
      <rect x="280" y="100" width="40" height="10" class="fp8-block"/>
      
      <rect x="80" y="110" width="40" height="10" class="fp8-block"/>
      <rect x="120" y="110" width="40" height="10" class="fp8-block-alt"/>
      <rect x="160" y="110" width="40" height="10" class="fp8-block"/>
      <rect x="200" y="110" width="40" height="10" class="fp8-block-alt"/>
      <rect x="240" y="110" width="40" height="10" class="fp8-block"/>
      <rect x="280" y="110" width="40" height="10" class="fp8-block-alt"/>
      
      <rect x="80" y="120" width="40" height="10" class="fp8-block-alt"/>
      <rect x="120" y="120" width="40" height="10" class="fp8-block"/>
      <rect x="160" y="120" width="40" height="10" class="fp8-block-alt"/>
      <rect x="200" y="120" width="40" height="10" class="fp8-block"/>
      <rect x="240" y="120" width="40" height="10" class="fp8-block-alt"/>
      <rect x="280" y="120" width="40" height="10" class="fp8-block"/>
      
      <!-- Main outline -->
      <rect x="80" y="70" width="240" height="60" fill="none" stroke="#444" stroke-width="2"/>
    </g>
    
    <!-- Scaling factors - horizontal -->
    <g id="scales-rowwise">
      <rect x="165" y="150" width="70" height="60" fill="#FFA500"/>
      
      <!-- Grid lines for 10x10 squares -->
      <line x1="175" y1="150" x2="175" y2="210" class="grid-line" stroke-width="1"/>
      <line x1="185" y1="150" x2="185" y2="210" class="grid-line" stroke-width="1"/>
      <line x1="195" y1="150" x2="195" y2="210" class="grid-line" stroke-width="1"/>
      <line x1="205" y1="150" x2="205" y2="210" class="grid-line" stroke-width="1"/>
      <line x1="215" y1="150" x2="215" y2="210" class="grid-line" stroke-width="1"/>
      <line x1="225" y1="150" x2="225" y2="210" class="grid-line" stroke-width="1"/>
      
      <line x1="165" y1="160" x2="235" y2="160" class="grid-line" stroke-width="1"/>
      <line x1="165" y1="170" x2="235" y2="170" class="grid-line" stroke-width="1"/>
      <line x1="165" y1="180" x2="235" y2="180" class="grid-line" stroke-width="1"/>
      <line x1="165" y1="190" x2="235" y2="190" class="grid-line" stroke-width="1"/>
      <line x1="165" y1="200" x2="235" y2="200" class="grid-line" stroke-width="1"/>
      
      <rect x="165" y="150" width="70" height="60" fill="none" stroke="#444" stroke-width="2"/>
    </g>
    
    <text x="200" y="230" class="small-text" text-anchor="middle">E8M0 scales (one per row)</text>
  </g>
  
  <!-- COLUMNWISE Quantization (right side) -->
  <g id="columnwise">
    <text x="600" y="25" class="title">Columnwise</text>
    <text x="600" y="45" class="label" style="font-size: 11px;">(32 consecutive elements vertically)</text>
    
    <!-- FP8 Tensor - vertical blocks -->
    <g id="tensor-columnwise">
      <!-- Blocks arranged vertically (40px height, 10px width) -->
      <rect x="480" y="70" width="10" height="40" class="fp8-block"/>
      <rect x="490" y="70" width="10" height="40" class="fp8-block-alt"/>
      <rect x="500" y="70" width="10" height="40" class="fp8-block"/>
      <rect x="510" y="70" width="10" height="40" class="fp8-block-alt"/>
      <rect x="520" y="70" width="10" height="40" class="fp8-block"/>
      <rect x="530" y="70" width="10" height="40" class="fp8-block-alt"/>
      
      <rect x="480" y="110" width="10" height="40" class="fp8-block-alt"/>
      <rect x="490" y="110" width="10" height="40" class="fp8-block"/>
      <rect x="500" y="110" width="10" height="40" class="fp8-block-alt"/>
      <rect x="510" y="110" width="10" height="40" class="fp8-block"/>
      <rect x="520" y="110" width="10" height="40" class="fp8-block-alt"/>
      <rect x="530" y="110" width="10" height="40" class="fp8-block"/>
      
      <rect x="480" y="150" width="10" height="40" class="fp8-block"/>
      <rect x="490" y="150" width="10" height="40" class="fp8-block-alt"/>
      <rect x="500" y="150" width="10" height="40" class="fp8-block"/>
      <rect x="510" y="150" width="10" height="40" class="fp8-block-alt"/>
      <rect x="520" y="150" width="10" height="40" class="fp8-block"/>
      <rect x="530" y="150" width="10" height="40" class="fp8-block-alt"/>
      
      <rect x="480" y="190" width="10" height="40" class="fp8-block-alt"/>
      <rect x="490" y="190" width="10" height="40" class="fp8-block"/>
      <rect x="500" y="190" width="10" height="40" class="fp8-block-alt"/>
      <rect x="510" y="190" width="10" height="40" class="fp8-block"/>
      <rect x="520" y="190" width="10" height="40" class="fp8-block-alt"/>
      <rect x="530" y="190" width="10" height="40" class="fp8-block"/>
      
      <!-- Main outline -->
      <rect x="480" y="70" width="60" height="160" fill="none" stroke="#444" stroke-width="2"/>
    </g>
    
    <!-- Scaling factors - vertical -->
    <g id="scales-columnwise">
      <rect x="565" y="95" width="60" height="110" fill="#FFA500"/>
      
      <!-- Grid lines for 10x10 squares -->
      <line x1="575" y1="95" x2="575" y2="205" class="grid-line" stroke-width="1"/>
      <line x1="585" y1="95" x2="585" y2="205" class="grid-line" stroke-width="1"/>
      <line x1="595" y1="95" x2="595" y2="205" class="grid-line" stroke-width="1"/>
      <line x1="605" y1="95" x2="605" y2="205" class="grid-line" stroke-width="1"/>
      <line x1="615" y1="95" x2="615" y2="205" class="grid-line" stroke-width="1"/>
      
      <line x1="565" y1="105" x2="625" y2="105" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="115" x2="625" y2="115" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="125" x2="625" y2="125" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="135" x2="625" y2="135" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="145" x2="625" y2="145" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="155" x2="625" y2="155" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="165" x2="625" y2="165" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="175" x2="625" y2="175" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="185" x2="625" y2="185" class="grid-line" stroke-width="1"/>
      <line x1="565" y1="195" x2="625" y2="195" class="grid-line" stroke-width="1"/>
      
      <rect x="565" y="95" width="60" height="110" fill="none" stroke="#444" stroke-width="2"/>
    </g>
    
    <text x="600" y="230" class="small-text" text-anchor="middle">E8M0 scales (one per column)</text>
  </g>
  
  <!-- Note at bottom -->
  <text x="400" y="270" class="small-text" text-anchor="middle" font-style="italic">Transposing between rowwise and columnwise quantization is not supported</text>
  <text x="400" y="290" class="small-text" text-anchor="middle" font-style="italic">because scaling factors would not align with the new dimension axis.</text>
</svg>


